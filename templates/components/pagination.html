{% comment %}
Reusable pagination component for list pages.
Include with: {% include "components/pagination.html" with prefix="tag" %}

Required context variables:
- page_obj: Django paginator page object
- page_size: Current page size
- page_sizes: List of available page sizes
- elided_pages: Elided page range from paginator
- filtered_count: Count of filtered items
- total_all_count: Total count of all items
- query: Current search query (optional)

Required variables when including:
- prefix: The prefix for element IDs (e.g., "tag", "dict", "category")
{% endcomment %}

<div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 border-t border-slate-200 bg-white px-3 py-3 flex-shrink-0">
    <div class="flex flex-wrap items-center gap-3">
        <div class="text-sm text-slate-600">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </div>
        <div class="flex items-center gap-2">
            <a
                href="?page=1&page_size={{ page_size }}{% if query %}&q={{ query|urlencode }}{% endif %}"
                class="px-3 py-2 text-sm bg-white border border-slate-200 rounded hover:bg-blue-50 text-slate-800"
            >&laquo;</a>
            {% if page_obj.has_previous %}
            <a
                href="?page={{ page_obj.previous_page_number }}&page_size={{ page_size }}{% if query %}&q={{ query|urlencode }}{% endif %}"
                class="px-3 py-2 text-sm bg-white border border-slate-200 rounded hover:bg-blue-50 text-slate-800"
            >&lsaquo;</a>
            {% else %}
            <span class="px-3 py-2 text-sm bg-slate-100 border border-slate-200 rounded text-slate-400 opacity-70">&lsaquo;</span>
            {% endif %}
            <div class="inline-flex items-center gap-1">
                {% for p in elided_pages %}
                    {% if p == '…' %}
                        <span class="px-2 py-2 text-sm text-slate-500">…</span>
                    {% elif p == page_obj.number %}
                        <span class="px-3 py-2 text-sm bg-blue-600 text-white rounded border border-blue-600">{{ p }}</span>
                    {% else %}
                        <a
                            href="?page={{ p }}&page_size={{ page_size }}{% if query %}&q={{ query|urlencode }}{% endif %}"
                            class="px-3 py-2 text-sm bg-white border border-slate-200 rounded hover:bg-blue-50 text-slate-800"
                        >{{ p }}</a>
                    {% endif %}
                {% endfor %}
            </div>
            {% if page_obj.has_next %}
            <a
                href="?page={{ page_obj.next_page_number }}&page_size={{ page_size }}{% if query %}&q={{ query|urlencode }}{% endif %}"
                class="px-3 py-2 text-sm bg-white border border-slate-200 rounded hover:bg-blue-50 text-slate-800"
            >&rsaquo;</a>
            {% else %}
            <span class="px-3 py-2 text-sm bg-slate-100 border border-slate-200 rounded text-slate-400 opacity-70">&rsaquo;</span>
            {% endif %}
            <a
                href="?page={{ page_obj.paginator.num_pages }}&page_size={{ page_size }}{% if query %}&q={{ query|urlencode }}{% endif %}"
                class="px-3 py-2 text-sm bg-white border border-slate-200 rounded hover:bg-blue-50 text-slate-800"
            >&raquo;</a>
        </div>
        <label class="inline-flex items-center gap-2 text-sm text-slate-700">
            <span>Records per page</span>
            <select
                id="{{ prefix }}-page-size"
                name="page_size"
                form="{{ prefix }}-filters"
                class="rounded border-slate-300 text-sm focus:border-blue-600 focus:ring-blue-600"
            >
                {% for size in page_sizes %}
                <option value="{{ size }}" {% if page_size == size %}selected{% endif %}>{{ size }}</option>
                {% endfor %}
            </select>
        </label>
    </div>
    <div class="text-sm text-slate-700">
        Count {{ filtered_count }} of {{ total_all_count }} rows
    </div>
</div>
